{"displayName": "penguin-vertex-pusher", "labels": {"tfx_py_version": "3-8", "tfx_runner": "kubeflow_v2", "tfx_version": "1-3-1"}, "pipelineSpec": {"components": {"CsvExampleGen": {"executorLabel": "CsvExampleGen_executor", "inputDefinitions": {"parameters": {"input_base": {"type": "STRING"}, "input_config": {"type": "STRING"}, "output_config": {"type": "STRING"}, "output_data_format": {"type": "INT"}, "output_file_format": {"type": "INT"}}}, "outputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "Pusher": {"executorLabel": "Pusher_executor", "inputDefinitions": {"artifacts": {"model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}}, "parameters": {"custom_config": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"pushed_model": {"artifactType": {"instanceSchema": "title: tfx.PushedModel\ntype: object\n"}}}}}, "Trainer": {"executorLabel": "Trainer_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"custom_config": {"type": "STRING"}, "eval_args": {"type": "STRING"}, "module_file": {"type": "STRING"}, "train_args": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}, "model_run": {"artifactType": {"instanceSchema": "title: tfx.ModelRun\ntype: object\n"}}}}}}, "deploymentSpec": {"executors": {"CsvExampleGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.example_gen.csv_example_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/tfx-oss-public/tfx:1.3.1", "lifecycle": {"preCacheCheck": {"args": ["--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.file_based_example_gen.driver"]}}}}, "Pusher_executor": {"container": {"args": ["--executor_class_path", "tfx.extensions.google_cloud_ai_platform.pusher.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/tfx-oss-public/tfx:1.3.1"}}, "Trainer_executor": {"container": {"args": ["--executor_class_path", "tfx.extensions.google_cloud_ai_platform.trainer.executor.GenericExecutor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/tfx-oss-public/tfx:1.3.1"}}}}, "pipelineInfo": {"name": "penguin-vertex-pusher"}, "root": {"dag": {"tasks": {"CsvExampleGen": {"componentRef": {"name": "CsvExampleGen"}, "inputs": {"parameters": {"input_base": {"runtimeValue": {"constantValue": {"stringValue": "gs://argolis-vertex-europewest4/data/penguin-vertex-pusher"}}}, "input_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"splits\": [\n    {\n      \"name\": \"single_split\",\n      \"pattern\": \"*\"\n    }\n  ]\n}"}}}, "output_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"split_config\": {\n    \"splits\": [\n      {\n        \"hash_buckets\": 2,\n        \"name\": \"train\"\n      },\n      {\n        \"hash_buckets\": 1,\n        \"name\": \"eval\"\n      }\n    ]\n  }\n}"}}}, "output_data_format": {"runtimeValue": {"constantValue": {"intValue": "6"}}}, "output_file_format": {"runtimeValue": {"constantValue": {"intValue": "5"}}}}}, "taskInfo": {"name": "CsvExampleGen"}}, "Pusher": {"componentRef": {"name": "Pusher"}, "dependentTasks": ["Trainer"], "inputs": {"artifacts": {"model": {"taskOutputArtifact": {"outputArtifactKey": "model", "producerTask": "Trainer"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "{\"ai_platform_enable_vertex\": true, \"ai_platform_serving_args\": {\"endpoint_name\": \"prediction-penguin-vertex-pusher\", \"machine_type\": \"n1-standard-4\", \"max_replica_count\": 4, \"min_replica_count\": 1, \"model_name\": \"try_pusher\", \"project_id\": \"argolis-rafaelsanchez-ml-dev\"}, \"ai_platform_vertex_container_image_uri\": \"europe-docker.pkg.dev/vertex-ai/prediction/tf2-cpu.2-6:latest\", \"ai_platform_vertex_region\": \"europe-west4\"}"}}}}}, "taskInfo": {"name": "Pusher"}}, "Trainer": {"componentRef": {"name": "Trainer"}, "dependentTasks": ["CsvExampleGen"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "examples", "producerTask": "CsvExampleGen"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "{\"ai_platform_enable_vertex\": true, \"ai_platform_training_args\": {\"project\": \"argolis-rafaelsanchez-ml-dev\", \"worker_pool_specs\": [{\"container_spec\": {\"image_uri\": \"gcr.io/tfx-oss-public/tfx:1.3.1\"}, \"machine_spec\": {\"machine_type\": \"n1-standard-4\"}, \"replica_count\": 1}]}, \"ai_platform_vertex_region\": \"europe-west4\", \"use_gpu\": false}"}}}, "eval_args": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"num_steps\": 5\n}"}}}, "module_file": {"runtimeValue": {"constantValue": {"stringValue": "gs://argolis-vertex-europewest4/pipeline_module/penguin-vertex-pusher/penguin_trainer.py"}}}, "train_args": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"num_steps\": 100\n}"}}}}}, "taskInfo": {"name": "Trainer"}}}}}, "schemaVersion": "2.0.0", "sdkVersion": "tfx-1.3.1"}, "runtimeConfig": {"gcsOutputDirectory": "gs://argolis-vertex-europewest4/pipeline_root/penguin-vertex-pusher"}}